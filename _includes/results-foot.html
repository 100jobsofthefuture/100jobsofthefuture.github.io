<div class="overlay"></div>
<!-- javascript -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="/js/vendor/jquery-3.3.1.min.js"><\/script>')</script>
<script src="/js/plugins.js"></script>
<script src="/js/main.js"></script>
<script>
  function getQueryVariable(variable) {
    var query = window.location.search.substring(1);
    var vars = query.split("&");
    for (var i = 0; i < vars.length; i++) {
      var pair = vars[i].split("=");
      if (pair[0] == variable) {
        return pair[1];
      }
    }
    return (false);
  }

  var type = getQueryVariable("type").toUpperCase();
  var aow1 = getQueryVariable("aow1").toUpperCase();
  var aow2 = getQueryVariable("aow2").toUpperCase();
  var aow3 = getQueryVariable("aow3").toUpperCase();

  $( document ).ready(function() {
    var numJobsToShow = 4;
    function showJobs(max) {
      var counter = 1;
      $('.job-card').each(function(index, value){
          if($(this).hasClass(type)) {
            if($(this).hasClass(aow1)) {
              if(counter <= max) {
                $(this).fadeIn();
                counter++;
              }
            } else if($(this).hasClass(aow2)) {
              if(counter <= max) {
                $(this).fadeIn();
                counter++;
              }
            } else if($(this).hasClass(aow3)) {
              if(counter <= max) {
                $(this).fadeIn();
                counter++;
              }
            } else {
              $(this).remove();
            }
          } else {
            $(this).remove();
          }
      }).promise().done(function(){
        fadeOutShoMoreButton();
      });
    }

    function fadeOutShoMoreButton() {
      console.log($('.job-card:hidden').length);
      if($('.job-card:hidden').length == 0) {
        $('#showMoreJobs').fadeOut();
      }
    }

    $('#showMoreJobs').on('click', function(){
      numJobsToShow = numJobsToShow + 4;
      showJobs(numJobsToShow);
    });

    // show first 4 jobs
    showJobs(numJobsToShow);
  });
</script>
